<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="author" content="Josh Moody">
		<meta name="keywords" content="pixel war">
		<meta name="description" content="Pixel War" />
		<meta name="twitter:card" content="img/web-card.png">
		<meta property="og:image" content="img/web-card.png">
		<title>Pixel War</title>
		<link rel="shortcut icon" href="img/favicon.ico">
		<link rel="stylesheet" href="css/main.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
	</head>
	<body>
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<div class="container-fluid">
				<a class="navbar-brand" href="#">Pixel War</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
					<div class="navbar-nav">
						<a class="nav-link active" aria-current="page" href="#">Home</a>
						<a class="nav-link" href="#">About</a>
						<a class="nav-link" href="#">Profile</a>
					</div>
				</div>
			</div>
		</nav>
		<div class="container d-flex justify-content-center">
			<canvas id="pixel-canvas" width="100" height="100" style="border:1px solid #000000;">
			</canvas>


			<script>
				var c = document.getElementById("pixel-canvas");
				var ctx = c.getContext("2d");
				let roguePixel = {x: parseInt(c.width/2), y: parseInt(c.height/2)};
				console.log(roguePixel);
				function gameStep(){
					const mag = Math.random() > .5 ? 1 : -1;
					const dir = Math.random() > .5 ? "vertical" : "horizontal";
					roguePixel = {x: dir === "horizontal" ? roguePixel.x + mag : roguePixel.x, y: dir === "vertical" ? roguePixel.y + mag : roguePixel.y};
					if(roguePixel.x >= c.width) roguePixel.x = c.width-1;
					if(roguePixel.x < 0) roguePixel.x = 0;
					if(roguePixel.y >= c.height) roguePixel.y = c.height-1;
					if(roguePixel.y < 0) roguePixel.y = 0;
					const pixelData = new Uint8ClampedArray(4 * c.width * c.height);
					for(let i = 0; i < pixelData.length; i+=4){
						pixelData[i] = 255;	// R
						pixelData[i+1] = 255;	// G
						pixelData[i+2] = 255;	// B
						pixelData[i+3] = 255;	// A
					}
					const p = (roguePixel.x * 4) + (roguePixel.y * c.width * 4);
					console.log(p);
					console.log(roguePixel);
					pixelData[p+1] = 0; pixelData[p+2] = 0;
					const myImageData = new ImageData(pixelData, c.width, c.height);
					ctx.putImageData(myImageData, 0, 0);
				}
				gameStep();
				setInterval(gameStep, 100);
			</script>
		</div>



		<!-- Socket.IO Javacript --><!--
		<script src="/socket.io/socket.io.js"></script>
		<script src="/js/app.js" charset="utf-8"></script>
		-->
	</body>
</html>
